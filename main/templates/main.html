{% extends 'base.html' %}

{% block content %}
<style>
    body {
        background-color: #212529;
    }
    .highlighted-item {
        background-color: #FFD700; /* Yellow background color */
        color: #000000; /* Black text color */
    }
</style>
<nav class="navbar navbar-dark bg-dark border-bottom">
    <div class="container">
        <a class="navbar-brand" href="#">B-Inventory | Welcome {{ name }}!</a>
        <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
    </div>
</nav>

<div class="container mt-4 text-light">
    <h1>B-Inventory</h1>

    <div class="mb-3">

        <p>You have added {{ product_count }} Items in the inventory!</p>
    </div>

    <table class="table table-dark">
        <thead>
            <tr>
                <th>Name</th>
                <th>Amount</th>
                <th>Price</th>
                <th>Description</th>
                <th>Date Added</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
                <tr {% if forloop.last %}class="highlighted-item"{% endif %}>
                    <td>{{ product.name }}</td>
                    <td>{{ product.amount }}</td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ product.date_added }}</td>
                    <td>
                        <form method="post">
                            {% csrf_token %}
                            <button type="submit" name="increment" value="{{ product.id }}" class="btn btn-sm btn-success">Increment</button>
                            <button type="submit" name="decrement" value="{{ product.id }}" class="btn btn-sm btn-warning">Decrement</button>
                            <button type="submit" name="delete" value="{{ product.id }}" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                        <a href="{% url 'main:edit_product' product.pk %}" class="btn btn-sm btn-primary">Edit</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br />

    <h5>Last login session: {{ last_login }}</h5>

    <a href="{% url 'main:logout' %}" class="btn btn-danger">Logout</a>

    <a href="{% url 'main:create_product' %}" class="btn btn-primary">Add New Item</a>
</div>

{% endblock content %}
